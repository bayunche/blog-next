{
  "question": "点赞接口返回 404 的根因是什么？",
  "analysis": "后端使用 Koa 路由 server/router/article.js 定义 POST /api/article/:id/like，对应的控制器在 server/controllers/article.js#L721-L741 中会在 ArticleModel.findOne 找不到记录时直接 ctx.throw(404)。另外前端 src/features/article/api/index.ts 在取消点赞时调用 DELETE /article/:id/like，但路由未实现，导致 DELETE 请求必然 404。",
  "evidence": [
    {
      "file": "server/router/article.js",
      "lines": [40],
      "snippet": ".post('/:id/like', like)"
    },
    {
      "file": "server/controllers/article.js#L721",
      "snippet": "const article = await ArticleModel.findOne({ where: { id: articleId } }); if (!article) { ctx.throw(404, '文章不存在'); }"
    },
    {
      "file": "src/features/article/api/index.ts:138",
      "snippet": "return request.post(`/article/${params.id}/like`)"
    },
    {
      "file": "src/features/article/api/index.ts:147",
      "snippet": "return request.delete(`/article/${params.id}/like`)"
    }
  ],
  "conclusion": "404 可能有两类来源：1) 请求文章不存在，被控制器抛错；2) 前端调用 DELETE /article/:id/like 取消点赞，但后端未实现该路由。修复应包括校验文章存在并在响应中携带 success/isLiked 字段，同时新增 DELETE 路由实现。"
}
